import pywikibot
from datetime import datetime, timedelta

def get_active_admins():
    site = pywikibot.Site('en', 'wikipedia')
    
    active_admins = []
    
    cutoff = datetime.now() - timedelta(days=30)  # Consider active if edited in last 30 days

    for user_dict in site.allusers(group='sysop', total=10):
        user = pywikibot.User(site, user_dict['name'])
        try:
            # Get the last contribution
            contributions = list(user.contributions(total=1))
            if contributions:
                last_edit = contributions[0][1]  # contributions return (page, timestamp, comment, etc.)
                if last_edit > cutoff:
                    active_admins.append(user.username)
        except Exception as e:
            print(f"Error checking {user.username}: {e} ")
            continue
    
    return active_admins
    
if __name__ == "__main__":
    admins = get_active_admins()
    print("Active Wikipedia Administrators:")
    for admin in sorted(admins):
        print(admin)
